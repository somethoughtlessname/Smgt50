<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule Manager</title>
    
    
    
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMGT50</title>
    
    <!-- LOAD THEME BEFORE CSS -->
    <script>
        (function() {
            const savedThemeName = localStorage.getItem('currentTheme');
            if (savedThemeName) {
                const savedThemes = JSON.parse(localStorage.getItem('savedThemes') || '[]');
                const theme = savedThemes.find(t => t.name === savedThemeName);
                
                if (theme) {
                    const root = document.documentElement;
                    Object.keys(theme.baseColors).forEach(key => {
                        root.style.setProperty(`--${key}`, theme.baseColors[key]);
                    });
                    Object.keys(theme.jobColors).forEach(key => {
                        root.style.setProperty(`--job-color-${key}`, theme.jobColors[key]);
                    });
                    console.log('âœ… Theme loaded before render:', savedThemeName);
                }
            }
        })();
    </script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- BLACK SPLASH SCREEN -->
    <div id="splash" style="position:fixed;top:0;left:0;width:100%;height:100%;background:#1F2937;z-index:999999;transition:opacity 0.3s ease-out;"></div>
    
    <div id="app" style="opacity:0;transition:opacity 0.3s ease-in;">
    
    <!-- Frozen Header -->
    <div class="frozen-header">
        <div class="header-buttons" id="headerButtons">
            
            
            
            <button class="header-btn" onclick="openAddJobModal()">+ Job</button>
            <button class="header-btn" onclick="openSettingsWindow()">Settings</button>
            <button class="header-btn" onclick="openDataWindow()">Data</button>
        </div>
        <!-- Job Title Card -->
        <div class="job-title-header-card" id="jobTitleHeaderCard">
            <div class="job-header-back" onclick="returnToMain()"></div>
            <div class="job-header-center" id="jobHeaderTitle">Job Name</div>
            <div class="job-header-settings" onclick="openJobSettingsWindow()">
                <div class="job-settings-dots">
                    <div class="settings-dot blue"></div>
                    <div class="settings-dot teal"></div>
                    <div class="settings-dot green"></div>
                    <div class="settings-dot gold"></div>
                    <div class="settings-dot white"></div>
                    <div class="settings-dot orange"></div>
                    <div class="settings-dot purple"></div>
                    <div class="settings-dot brown"></div>
                    <div class="settings-dot red"></div>
                </div>
            </div>
        </div>
        <!-- Settings Title Card -->
        <div class="settings-title-header-card" id="settingsTitleHeaderCard">
            <div class="settings-header-back" onclick="returnToMain()"></div>
            <div class="settings-header-center">Settings</div>
            <div class="settings-header-unused"></div>
        </div>
        <!-- Data Title Card -->
        <div class="settings-title-header-card" id="dataTitleHeaderCard">
            <div class="settings-header-back" onclick="returnToMain()"></div>
            <div class="settings-header-center">Data</div>
            <div class="settings-header-unused"></div>
        </div>
        <!-- Job Settings Title Card -->
        <div class="job-settings-title-header-card" id="jobSettingsTitleHeaderCard">
            <div class="job-settings-header-back" onclick="returnToJobEntry()"></div>
            <div class="job-settings-header-center">Job Settings</div>
            <div class="job-settings-header-unused"></div>
        </div>
    </div>

    <!-- Main Window -->
    <div class="window active" id="mainWindow">
        <div class="content">
            <!-- Content will be dynamically generated by renderMainWindow() -->
            <div class="section-divider">Jobs</div>
            
            <div id="jobsList">
                <div class="empty-state">
                    No jobs added yet.<br>
                    Use the "+ Job" button above to add your first job.
                </div>
            </div>

            <div class="section-divider">Quick Schedule</div>
            <div id="quickScheduleSection">
                <div class="empty-state">
                    Loading quick schedule...
                </div>
            </div>

            <div class="section-divider">History</div>
            <div id="historySection">
                <div class="empty-state">
                    Loading history...
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Window -->
    <div class="window" id="settingsWindow">
        <div class="content">
            <!-- Empty - ready for settings.js -->
        </div>
    </div>

    <!-- Data Window -->
    <div class="window" id="dataWindow">
        <div class="content">
            <div class="section-divider">Import / Export</div>
            
            <div class="job-card" onclick="openDeleteJobModal()" style="cursor: pointer;">
    <div class="job-title-section" style="background: var(--red);">
        <div class="job-title" style="color: var(--text1);">Delete Job</div>
    </div>
    <div class="job-info-section">
        <div class="next-shift-time">Remove this job and all its data</div>
    </div>
</div>
            
            <div class="job-card" onclick="document.getElementById('importFile').click()" style="cursor: pointer;">
                <div class="job-title-section">
                    <div class="job-title">Import Schedule Data</div>
                </div>
                <div class="job-info-section">
                    <div class="next-shift-time">Upload backup file</div>
                </div>
            </div>
            
            <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)">
            
            <div class="placeholder-section">
                Use export to backup your schedule data.<br>
                Use import to restore from a backup file.
            </div>
        </div>
    </div>

   <!-- Job Settings Window -->
<div class="window" id="jobSettingsWindow">
    <div class="content">
        <div class="section-divider">Job Customization</div>
        
        <div class="color-picker-card">
            <div class="color-picker-header">
                <div class="color-picker-title">Card Color</div>
            </div>
            <div class="color-picker-body">
                <div class="color-option blue selected" data-color="blue" onclick="selectJobColor('blue')"></div>
                <div class="color-option green" data-color="green" onclick="selectJobColor('green')"></div>
                <div class="color-option purple" data-color="purple" onclick="selectJobColor('purple')"></div>
                <div class="color-option red" data-color="red" onclick="selectJobColor('red')"></div>
                <div class="color-option orange" data-color="orange" onclick="selectJobColor('orange')"></div>
                <div class="color-option teal" data-color="teal" onclick="selectJobColor('teal')"></div>
                <div class="color-option gold" data-color="gold" onclick="selectJobColor('gold')"></div>
                <div class="color-option brown" data-color="brown" onclick="selectJobColor('brown')"></div>
            </div>
        </div>
        
        <!-- Show Breaks Setting Card -->
        <div class="breaks-setting-card" id="breaksSettingCard">
            <div class="breaks-setting-top">
                <div class="breaks-checkbox-section checked" id="breaksCheckbox" onclick="toggleJobBreaks()"></div>
                <div class="breaks-setting-label">SHOW BREAKS</div>
            </div>
        </div>
        
        <!-- Payday Settings Container -->
        <div id="payday-settings-container"></div> 
           
            <div class="section-divider">Job Management</div>
            
            <div class="job-card" onclick="openDeleteJobModal()" style="cursor: pointer;">
                <div class="job-title-section">
                    <div class="job-title" style="color: #000000;">Delete Job</div>
                </div>
                <div class="job-info-section">
                    <div class="next-shift-time">Remove this job and all its data</div>
                </div>
            </div>
            
            <div class="placeholder-section">
                More job settings coming soon...
            </div>
        </div>
    </div>

    <!-- Job Entry Window -->
    <div class="window" id="jobEntryWindow">
        <div class="job-tabs">
            <div class="tab" onclick="switchWeekTab('previous')">Last Week</div>
            <div class="tab active" onclick="switchWeekTab('current')">This Week</div>
            <div class="tab" onclick="switchWeekTab('next')">Next Week</div>
        </div>

        <div class="sub-tabs">
            <div class="tab active" onclick="switchSubTab('scheduled')">Scheduled Hours</div>
            <div class="tab" onclick="switchSubTab('worked')">Worked Hours</div>
        </div>

        <div class="content">
            <!-- Date Range Card - Now appears above day cards in all views -->
            <div class="date-range-card" id="dateRangeCard">
                <div class="date-range-text" id="dateRangeText">December 9th - December 15th</div>
            </div>

            <div class="day-card" data-day="1">
                <div class="day-letter">M</div>
                <div class="day-number">01</div>
                <div class="day-times">
                    <div class="time-field start" onclick="openTimePicker('monday', 'start')">START</div>
                    <div class="time-field end" onclick="openTimePicker('monday', 'end')">END</div>
                    <div class="time-field break">BREAK</div>
                    <div class="time-field total">0.0H</div>
                </div>
                <div class="add-shift-btn"></div>
            </div>

            <div class="day-card" data-day="2">
                <div class="day-letter">T</div>
                <div class="day-number">02</div>
                <div class="day-times">
                    <div class="time-field start" onclick="openTimePicker('tuesday', 'start')">START</div>
                    <div class="time-field end" onclick="openTimePicker('tuesday', 'end')">END</div>
                    <div class="time-field break">BREAK</div>
                    <div class="time-field total">0.0H</div>
                </div>
                <div class="add-shift-btn"></div>
            </div>

            <div class="day-card" data-day="3">
                <div class="day-letter">W</div>
                <div class="day-number">03</div>
                <div class="day-times">
                    <div class="time-field start" onclick="openTimePicker('wednesday', 'start')">START</div>
                    <div class="time-field end" onclick="openTimePicker('wednesday', 'end')">END</div>
                    <div class="time-field break">BREAK</div>
                    <div class="time-field total">0.0H</div>
                </div>
                <div class="add-shift-btn"></div>
            </div>

            <div class="day-card" data-day="4">
                <div class="day-letter">T</div>
                <div class="day-number">04</div>
                <div class="day-times">
                    <div class="time-field start" onclick="openTimePicker('thursday', 'start')">START</div>
                    <div class="time-field end" onclick="openTimePicker('thursday', 'end')">END</div>
                    <div class="time-field break">BREAK</div>
                    <div class="time-field total">0.0H</div>
                </div>
                <div class="add-shift-btn"></div>
            </div>

            <div class="day-card" data-day="5">
                <div class="day-letter">F</div>
                <div class="day-number">05</div>
                <div class="day-times">
                    <div class="time-field start" onclick="openTimePicker('friday', 'start')">START</div>
                    <div class="time-field end" onclick="openTimePicker('friday', 'end')">END</div>
                    <div class="time-field break">BREAK</div>
                    <div class="time-field total">0.0H</div>
                </div>
                <div class="add-shift-btn"></div>
            </div>

            <div class="day-card" data-day="6">
                <div class="day-letter">S</div>
                <div class="day-number">06</div>
                <div class="day-times">
                    <div class="time-field start" onclick="openTimePicker('saturday', 'start')">START</div>
                    <div class="time-field end" onclick="openTimePicker('saturday', 'end')">END</div>
                    <div class="time-field break">BREAK</div>
                    <div class="time-field total">0.0H</div>
                </div>
                <div class="add-shift-btn"></div>
            </div>

            <div class="day-card" data-day="0">
                <div class="day-letter">S</div>
                <div class="day-number">07</div>
                <div class="day-times">
                    <div class="time-field start" onclick="openTimePicker('sunday', 'start')">START</div>
                    <div class="time-field end" onclick="openTimePicker('sunday', 'end')">END</div>
                    <div class="time-field break">BREAK</div>
                    <div class="time-field total">0.0H</div>
                </div>
                <div class="add-shift-btn"></div>
            </div>

           <div class="total-hours-card" id="totalHoursCard">
    <div class="total-hours-left" id="totalHoursLeft">
        <div class="total-hours-title">Total Hours</div>
    </div>
    <div class="total-hours-right">
        <div class="total-hours-time" id="totalHoursDisplay">0 HOURS, 0 MINUTES</div>
    </div>
</div>

            <!-- View Mode Tabs -->
<div class="view-tabs">
    <div class="view-tab" onclick="switchViewMode('simple')">Simple</div>
    <div class="view-tab active" onclick="switchViewMode('standard')">Detailed</div>
    <div class="view-tab" onclick="switchViewMode('full')">Full</div>
</div>

            <div class="clear-schedule-card" onclick="openClearScheduleModal()">
                Clear Schedule
            </div>
        </div>
    </div>
        
    <!-- Payday Preview Container -->
            <div id="payday-preview-container"></div>    

    <!-- Copy to Clipboard Overlay for Full View -->
    <div class="copy-overlay">
        <button class="copy-button" id="copyButton" onclick="copyScheduleToClipboard()">Copy to Clipboard</button>
    </div>

    <!-- Add Job Modal -->
    <div class="modal-overlay" id="addJobModal">
        <div class="modal-content">
            <div class="modal-header">Add New Job</div>
            <div class="modal-body">
                <input type="text" class="modal-input" id="jobTitleInput" placeholder="Enter job title...">
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel" onclick="closeAddJobModal()">Cancel</button>
                <button class="modal-btn save" onclick="saveJob()">Save</button>
            </div>
        </div>
    </div>

    <!-- Delete Job Modal -->
    <div class="modal-overlay" id="deleteJobModal">
        <div class="modal-content">
            <div class="modal-header">Delete Job</div>
            <div class="modal-body">
                <p style="color: var(--text1); text-align: center; line-height: 1.5;">
                    Are you sure you want to delete this job?<br>
                    <strong>This action cannot be undone.</strong>
                </p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel" onclick="closeDeleteJobModal()">Cancel</button>
                <button class="modal-btn delete" onclick="confirmDeleteJob()">Delete</button>
            </div>
        </div>
    </div>

    <!-- Clear Schedule Modal -->
    <div class="modal-overlay" id="clearScheduleModal">
        <div class="modal-content">
            <div class="modal-header">Clear Schedule</div>
            <div class="modal-body">
                <p style="color: var(--text1); text-align: center; line-height: 1.5;">
                    Are you sure you want to clear this week's schedule?<br>
                    <strong>This will reset all times to default.</strong>
                </p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel" onclick="closeClearScheduleModal()">Cancel</button>
                <button class="modal-btn delete" onclick="confirmClearSchedule()">Clear</button>
            </div>
        </div>
    </div>

    <!-- Time Picker Modal -->
    <div class="time-picker-modal" id="timePickerModal">
        <div class="time-picker-content">
            <div class="time-picker-header">Select Time</div>
            <div class="time-display" id="timeDisplay">12:00 AM</div>
            <div class="time-picker-body">
                <div class="time-controls-row">
                    <button class="time-btn backspace" onclick="timeBackspace()"></button>
                    <button class="time-btn off" onclick="setTimeOff()">OFF</button>
                    <button class="time-btn none" onclick="setTimeNone()">NONE</button>
                    <button class="time-btn clear" onclick="timeClear()">C</button>
                </div>

                <div class="time-numpad">
                    <button class="time-btn" onclick="timeInput('1')">1</button>
                    <button class="time-btn" onclick="timeInput('2')">2</button>
                    <button class="time-btn" onclick="timeInput('3')">3</button>
                    <button class="time-btn am active" onclick="toggleAmPm('am')" id="amBtn">AM</button>
                    
                    <button class="time-btn" onclick="timeInput('4')">4</button>
                    <button class="time-btn" onclick="timeInput('5')">5</button>
                    <button class="time-btn" onclick="timeInput('6')">6</button>
                    <button class="time-btn pm" onclick="toggleAmPm('pm')" id="pmBtn">PM</button>
                    
                    <button class="time-btn" onclick="timeInput('7')">7</button>
                <button class="time-btn" onclick="timeInput('8')">8</button>
                <button class="time-btn" onclick="timeInput('9')">9</button>
                <button class="time-btn" onclick="timeInput('0')">0</button>
            </div>

            <!-- Quick Time Range Buttons - Only visible in scheduled mode -->
            <div class="quick-ranges-row" id="quickRangesRow">
                <!-- Buttons will be dynamically populated by JavaScript -->
            </div>

        </div>
        <div class="time-picker-footer">
            <button class="time-action-btn" onclick="closeTimePicker()">Cancel</button>
            <button class="time-action-btn set" onclick="setTime()">Set Time</button>
        </div>
        </div>
    </div>

    <!-- Overnight Shift Modal -->
    <div class="overnight-modal" id="overnightModal">
        <div class="overnight-modal-content">
            <div class="overnight-modal-header">Overnight Shift?</div>
            <div class="overnight-modal-body">
                <p>The end time is before the start time:</p>
                <div class="overnight-modal-times" id="overnightTimes">
                    11:00 PM to 6:00 AM
                </div>
                <p>Does this shift continue into the next day?</p>
            </div>
            <div class="overnight-modal-footer">
                <button class="overnight-btn" onclick="rejectOvernightShift()">No, Fix Times</button>
                <button class="overnight-btn yes" onclick="confirmOvernightShift()">Yes, Overnight</button>
            </div>
        </div>
    </div>
        
        

    <!-- JavaScript Files -->
   <script src="app.js"></script>        
<script src="ui-manager.js"></script>
<script src="weather"></script> 
<script src="time-picker.js"></script>        <!-- MOVED HERE -->
<script src="settings.js"></script>
<script src="splash.js"></script>
<script src="history.js"></script>
<script src="grid.js"></script>
<script src="payday"></script>
<script src="impex.js"></script>
<script src="week-rollover.js"></script>
<script src="workhistory.js"></script>
<script src="break.js"></script>        
<script src="theme.js"></script>        
               
    
    <script>
        // Initialize settings UI on load
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                if (typeof updateQuickScheduleSettingsUI === 'function') {
                    updateQuickScheduleSettingsUI();
                }
                if (typeof updateHistorySettingsUI === 'function') {
                    updateHistorySettingsUI();
                }
            }, 200);
        });
    </script>
    
    </div>
    
</body>
</html>